!function(e){function t(t){for(var n,i,l=t[0],u=t[1],s=t[2],d=0,f=[];d<l.length;d++)i=l[d],a[i]&&f.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(c&&c(t);f.length;)f.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,l=1;l<r.length;l++){var u=r[l];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var c=u;o.push([0,1]),r()}({"./node_modules/moment/locale sync recursive en-au":function(e,t,r){var n={"./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js"};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="./node_modules/moment/locale sync recursive en-au"},"./source/App.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r("./node_modules/react/index.js")),o=r("./source/components/modal/modal.jsx");r("./node_modules/sweetalert/dist/sweetalert.css");var i=l(r("./source/socket.js"));l(r("./node_modules/lodash.noop/index.js"));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),n(t,[{key:"componentWillMount",value:function(){i.default.connect(),window.plugins&&(window.plugins.speechRecognition?window.plugins.speechRecognition.hasPermission(function(e){0==e?window.plugins.speechRecognition.requestPermission(function(){return console.log("Permission granted")},function(){return console.log("Error on granted")}):console.log("Permission granted")},function(){return console.log("Error on check")}):window.alert("你的裝置並不支持語音功能"))}},{key:"render",value:function(){return a.default.createElement(a.default.Fragment,null,{...this.props.children})}}]),t}();t.default=(0,o.installModal)(u)},"./source/api/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("./source/api/user.js")),a=o(r("./source/api/order.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.default={user:n,order:a}},"./source/api/order.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overtimeOrder=t.acceptOrder=t.getTakenOrder=t.getOrdererOrder=t.confirmOrder=t.releaseOrder=t.cancelOrder=t.makeOrder=t.getOrder=t.getAnOrder=void 0;t.getAnOrder=(n=y(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.default.getState().base.accessToken,e.next=3,p.default.get(m.default+"/api/order/"+t,{headers:{authorization:"Bearer "+r}});case 3:return n=e.sent,a=n.data,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),t.getOrder=(a=y(regeneratorRuntime.mark(function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.default.getState().base.accessToken,e.next=3,p.default.get(m.default+"/api/order",{params:{status:a},headers:{authorization:"Bearer "+t}});case 3:return r=e.sent,n=r.data,e.abrupt("return",n.data);case 6:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),t.makeOrder=(o=y(regeneratorRuntime.mark(function e(t,r,n,a){var o,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.default.getState().base.accessToken,e.next=3,p.default.post(m.default+"/api/order",{origin:t,destination:n,criteria:a,route:""!=r.trim()?r.trim():void 0},{headers:{authorization:"Bearer "+o}});case 3:return i=e.sent,l=i.data,e.abrupt("return",l.data);case 6:case"end":return e.stop()}},e,this)})),function(e,t,r,n){return o.apply(this,arguments)}),t.cancelOrder=(i=y(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.default.getState().base.accessToken,e.next=3,p.default.post(m.default+"/api/order/"+t,{type:"cancel"},{headers:{authorization:"Bearer "+r}});case 3:return n=e.sent,a=n.data,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),t.releaseOrder=(l=y(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.default.getState().base.accessToken,e.next=3,p.default.post(m.default+"/api/order/"+t,{type:"release"},{headers:{authorization:"Bearer "+r}});case 3:return n=e.sent,a=n.data,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)}),t.confirmOrder=(u=y(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.default.getState().base.accessToken,e.next=3,p.default.post(m.default+"/api/order/"+t,{type:"confirm"},{headers:{authorization:"Bearer "+r}});case 3:return n=e.sent,a=n.data,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)}),t.getOrdererOrder=(s=y(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.default.getState().base.accessToken,e.next=3,p.default.get(m.default+"/api/order",{params:{status:"all",identity:"orderer"},headers:{authorization:"Bearer "+t}});case 3:return r=e.sent,n=r.data,e.abrupt("return",n.data);case 6:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),t.getTakenOrder=(c=y(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.default.getState().base.accessToken,e.next=3,p.default.get(m.default+"/api/order",{params:{status:"all"},headers:{authorization:"Bearer "+t}});case 3:return r=e.sent,n=r.data,e.abrupt("return",n.data);case 6:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)}),t.acceptOrder=(d=y(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.default.getState().base.accessToken,e.next=3,p.default.post(m.default+"/api/order/"+t,{type:"accept"},{headers:{Authorization:"Bearer "+r}});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)}),t.overtimeOrder=(f=y(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.default.getState().base.accessToken,e.next=3,p.default.post(m.default+"/api/order/"+t,{type:"overtime"},{headers:{Authorization:"Bearer "+r}});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)});var n,a,o,i,l,u,s,c,d,f,p=h(r("./node_modules/axios/index.js")),m=h(r("./source/api/url.js")),g=h(r("./source/store.js"));function h(e){return e&&e.__esModule?e:{default:e}}function y(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}},"./source/api/url.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="http://admin.hkairportqualitytaxi.com"},"./source/api/user.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateVehicleRegNo=t.upload=t.register=t.changePw=t.forgetPassword=t.getMe=t.login=void 0;t.login=(n=g(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.post(d.default+"/api/user/login",{telephone_no:t,password:r,type:"driver"});case 2:return n=e.sent,a=n.data,e.next=6,f.default.whatIsMe(a.access_token);case 6:return e.abrupt("return",{access_token:a.access_token,user:a.user});case 7:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)}),t.getMe=(a=g(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.get(d.default+"/api/user/"+t,{headers:{authorization:"Bearer "+r}});case 3:return n=e.sent,a=n.data,e.next=7,f.default.whatIsMe(r);case 7:return e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e,t){return a.apply(this,arguments)}),t.forgetPassword=(o=g(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.post(d.default+"/api/user/forgetPassword",t).catch(function(e){return console.log(e),window.alert("您的用戶名稱或電話號碼錯誤，請重新確認"),null});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)}),t.changePw=(i=g(regeneratorRuntime.mark(function e(t,r,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,r,n),e.next=3,c.default.patch(d.default+"/api/user/"+r,t,{headers:{authorization:"Bearer "+n}}).catch(function(e){return console.log(e),window.alert("您的密碼並不正確，請重新輸入"),null});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)})),function(e,t,r){return i.apply(this,arguments)}),t.register=(l=g(regeneratorRuntime.mark(function e(t,r,n,a,o,i){var l,u,s,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"driver",e.next=3,c.default.post(d.default+"/api/user",{type:"driver",username:t,telephone_no:n,password:r,vehicle_reg_no:a,taxi_driver_id_no:o,taxi_driver_id_photo:i}).catch(function(e){return e.response.data});case 3:if(!(l=e.sent).error){e.next=6;break}return e.abrupt("return",l);case 6:return u=l.data,s=u.access_token,f=u.user,e.abrupt("return",{access_token:s,user:f});case 8:case"end":return e.stop()}},e,this)})),function(e,t,r,n,a,o){return l.apply(this,arguments)}),t.upload=(u=g(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("image",t),e.next=4,c.default.post(d.default+"/api/upload",r);case 4:return n=e.sent,e.abrupt("return",n.data.data.filename);case 6:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)}),t.updateVehicleRegNo=(s=g(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.default.getState().base.accessToken,e.next=3,c.default.patch(d.default+"/api/user/"+p.default.getState().base.user._id,{vehicle_reg_no:t},{headers:{authorization:"Bearer "+r}});case 3:return n=e.sent,a=n.data,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)});var n,a,o,i,l,u,s,c=m(r("./node_modules/axios/index.js")),d=m(r("./source/api/url.js")),f=m(r("./source/socket.js")),p=m(r("./source/store.js"));function m(e){return e&&e.__esModule?e:{default:e}}function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}},"./source/components/modal/modal.css":function(e,t,r){},"./source/components/modal/modal.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.installModal=function(e){return function(t){function r(e){u(this,r);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.componentWillMount=function(e){d=function(e){return t.setState({component:e})},f=function(e){return t.setState({show:e})},p=function(e){return t.setState({header:e})}},t.state={show:!1,header:"Modal Header",component:function(e){return l.default.createElement(l.default.Fragment,null)}},t}return c(r,t),a(r,[{key:"render",value:function(){var t=this;return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"modal fade"+(this.state.show?" in block":""),role:"dialog"},l.default.createElement("div",{className:"modal-dialog"},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-header"},l.default.createElement("button",{type:"button",className:"close",onClick:function(e){return t.setState({show:!1})}},"×"),l.default.createElement("h4",{className:"modal-title"},this.state.header)),l.default.createElement(this.state.component,null)))),l.default.createElement(e,this.props))}}]),r}(l.default.Component)};var o,i=r("./node_modules/react/index.js"),l=(o=i)&&o.__esModule?o:{default:o};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r("./source/components/modal/modal.css");var d=null,f=null,p=null;t.default=function(e){return function(t){function r(){var e,t,n;u(this,r);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=n=s(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.componentDidMount=function(){return d(n.refs.wrapped.renderModal)},s(n,t)}return c(r,l.default.Component),a(r,[{key:"render",value:function(){return l.default.createElement(e,n({},this.props,{ref:"wrapped",setShow:f,setHeader:p}))}}]),r}()}},"./source/cookie.js":function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){for(var t in e)"save"!==t&&"clear"!==t&&(this[t]=e[t])}a.prototype.save=function(e){for(var t in e.getAll())e.remove(t);for(var r in this)e.set(r,"object"===n(this[r])?JSON.stringify(this[r]):this[r])},a.prototype.clear=function(e){for(var t in this)delete this[t];for(var r in e.getAll())e.remove(r)},e.exports=a},"./source/css/bootstrap.css":function(e,t,r){},"./source/css/index.js":function(e,t,r){"use strict";r("./source/css/bootstrap.css"),r("./source/css/inline-class.css"),r("./source/css/preference.css")},"./source/css/inline-class.css":function(e,t,r){},"./source/css/preference.css":function(e,t,r){},"./source/index.js":function(e,t,r){"use strict";var n=c(r("./node_modules/react/index.js")),a=c(r("./node_modules/react-dom/index.js")),o=r("./node_modules/react-router-dom/es/index.js"),i=c(r("./source/store.js")),l=c(r("./source/router.jsx")),u=r("./node_modules/react-redux/es/index.js"),s=r("./node_modules/react-cookie/lib/index.js");function c(e){return e&&e.__esModule?e:{default:e}}r("./node_modules/ken.yip/css/bootstrap.css"),r("./node_modules/ken.yip/css/inline-class.css"),r("./source/css/index.js"),r("./node_modules/babel-core/register.js"),r("./node_modules/babel-polyfill/lib/index.js");var d=function(){window.MobileAccessibility?window.MobileAccessibility.usePreferredTextZoom(!1):window.alert("MobileAccessibility not exist"),a.default.render(n.default.createElement(u.Provider,{store:i.default},n.default.createElement(s.CookiesProvider,null,n.default.createElement(o.HashRouter,null,n.default.createElement(l.default,null)))),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",d,!1):d()},"./source/modules/base/base.action.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setUser=function(e,t){return{type:"SET_USER",payload:{user:e,accessToken:t}}}},"./source/modules/base/base.reducer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r("./node_modules/ken.yip/react/createReducer.js"),i=(n=o)&&n.__esModule?n:{default:n};var l={SET_USER:function(e,t){var r=a({},e);return r.user=t.payload.user,r.accessToken=t.payload.accessToken,r}};t.default=(0,i.default)({user:null,accessToken:null},l)},"./source/modules/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.action=void 0;var n,a=r("./node_modules/redux/es/redux.js"),o=r("./source/modules/base/base.reducer.js"),i=(n=o)&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r("./source/modules/base/base.action.js"));var u=(0,a.combineReducers)({base:i.default});t.action={base:l};t.default=u},"./source/pages/changePw/changePw.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=s(r("./node_modules/react/index.js")),i=r("./node_modules/react-redux/es/index.js"),l=s(r("./source/pages/changePw/changePw.view.jsx")),u=s(r("./source/pages/changePw/changePw.model.js"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={oldpw:"",newpw:"",newpwconfirm:""},r.model=u.default.bind(r)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentWillMount",value:function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.default.createElement(l.default,n({},this.model,this.props,this.state))}}]),t}();t.default=(0,i.connect)(function(e,t){return{user:e.base.user,accessToken:e.base.accessToken}},function(e,t){return{}})(d)},"./source/pages/changePw/changePw.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(){var e,t,r=this;return{onValueChange:function(e,t){var a=n({},r.state);a[e]=t,r.setState(a)},onSubmit:(e=regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n({},r.state)).newpw==t.newpwconfirm){e.next=3;break}return e.abrupt("return",window.alert("您的新密碼確認並不相同，請重新輸入"));case 3:return o={old_pw:t.oldpw,new_pw:t.newpw},e.next=6,a.default.user.changePw(o,r.props.user._id,r.props.accessToken);case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:window.alert("你已經更新了密碼，請用這密碼登入"),r.props.history.push("/main");case 11:case"end":return e.stop()}},e,r)}),t=function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})},function(){return t.apply(this,arguments)}),onBack:function(){r.props.history.push("/main")}}};var a=o(r("./source/api/index.js"));o(r("./source/cookie.js"));function o(e){return e&&e.__esModule?e:{default:e}}},"./source/pages/changePw/changePw.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,o=(n=["\n    height: 100%;\n    width: 100%;\n    background-size: cover;\n    position: absolute;\n    z-index: 0;\n    background: #000;\n\n    &> .fogrt-back{\n        &> .fogrt-back-icon{\n            height: 5rem;\n            width: 5rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n\n            &> i{\n                color: #FFF;\n                font-size: 3.5rem;\n            }\n        }\n    }\n    \n    &> .forget-wrapper{\n        margin: 5vh 10vw;\n        background: #333333;\n        padding: 5vh 10vw;\n\n        &> .forget-title{\n            display: flex;\n            justify-content: center;\n            color: #fff;\n            font-size: 1.8rem;\n            padding: 0.5rem;\n            border-bottom: 1px solid;\n        }\n    \n        &> .forget-desc{\n            margin: 1vh 0;\n            color: #FFF;\n            font-size: 1.2rem;\n        }\n    \n        &> .forget-item{\n            padding: 1rem 0px;\n    \n            &> .forget-item-title{\n                padding: 0.5rem;\n                color: #FFF;\n            }\n    \n            &> .forget-item-input{\n                &> input{\n                    width: 100%;\n                    border: 1px solid #FFF;\n                    background: #333333;\n                    font-size: 1.4rem;\n                    height: 3rem;\n                    color: #FFF;\n                    padding: 0 0.5rem;\n                }\n            }\n        }\n    \n        &> .foget-button{\n            width: 100%;\n            height: 3.4rem;\n            background: #51AF53;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            margin-top: 2rem;\n        }\n\n        &> .foget-button-back{\n            width: 100%;\n            height: 3.4rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            border: 1px solid #FFF;\n            margin-top: 2rem;\n        }\n    }\n"],a=["\n    height: 100%;\n    width: 100%;\n    background-size: cover;\n    position: absolute;\n    z-index: 0;\n    background: #000;\n\n    &> .fogrt-back{\n        &> .fogrt-back-icon{\n            height: 5rem;\n            width: 5rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n\n            &> i{\n                color: #FFF;\n                font-size: 3.5rem;\n            }\n        }\n    }\n    \n    &> .forget-wrapper{\n        margin: 5vh 10vw;\n        background: #333333;\n        padding: 5vh 10vw;\n\n        &> .forget-title{\n            display: flex;\n            justify-content: center;\n            color: #fff;\n            font-size: 1.8rem;\n            padding: 0.5rem;\n            border-bottom: 1px solid;\n        }\n    \n        &> .forget-desc{\n            margin: 1vh 0;\n            color: #FFF;\n            font-size: 1.2rem;\n        }\n    \n        &> .forget-item{\n            padding: 1rem 0px;\n    \n            &> .forget-item-title{\n                padding: 0.5rem;\n                color: #FFF;\n            }\n    \n            &> .forget-item-input{\n                &> input{\n                    width: 100%;\n                    border: 1px solid #FFF;\n                    background: #333333;\n                    font-size: 1.4rem;\n                    height: 3rem;\n                    color: #FFF;\n                    padding: 0 0.5rem;\n                }\n            }\n        }\n    \n        &> .foget-button{\n            width: 100%;\n            height: 3.4rem;\n            background: #51AF53;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            margin-top: 2rem;\n        }\n\n        &> .foget-button-back{\n            width: 100%;\n            height: 3.4rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            border: 1px solid #FFF;\n            margin-top: 2rem;\n        }\n    }\n"],Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(a)}}))),i=u(r("./node_modules/react/index.js")),l=u(r("./node_modules/styled-components/dist/styled-components.browser.esm.js"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return i.default.createElement(s,null,i.default.createElement("div",{className:"forget-wrapper"},i.default.createElement("div",{className:"forget-title"},"更改密碼"),i.default.createElement("div",{className:"forget-item"},i.default.createElement("div",{className:"forget-item-title"},"您原本的密碼"),i.default.createElement("div",{className:"forget-item-input"},i.default.createElement("input",{placeholder:"您現在的密碼",type:"password",value:e.oldpw,onChange:function(t){return e.onValueChange("oldpw",t.target.value)}}))),i.default.createElement("div",{className:"forget-item"},i.default.createElement("div",{className:"forget-item-title"},"新的密碼"),i.default.createElement("div",{className:"forget-item-input"},i.default.createElement("input",{placeholder:"新的密碼",type:"password",value:e.newpw,onChange:function(t){return e.onValueChange("newpw",t.target.value)}}))),i.default.createElement("div",{className:"forget-item"},i.default.createElement("div",{className:"forget-item-title"},"再次確認您的密碼"),i.default.createElement("div",{className:"forget-item-input"},i.default.createElement("input",{placeholder:"再次確認您的密碼",type:"password",value:e.newpwconfirm,onChange:function(t){return e.onValueChange("newpwconfirm",t.target.value)}}))),i.default.createElement("div",{className:"foget-button",onClick:function(){return e.onSubmit()}},"提交"),i.default.createElement("div",{className:"foget-button-back",onClick:function(){return e.onBack()}},"返回")))};var s=l.default.div(o)},"./source/pages/forget/forget.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r("./node_modules/react/index.js")),i=u(r("./source/pages/forget/forget.view.jsx")),l=u(r("./source/pages/forget/forget.model.js"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={tele:"",username:""},r.model=l.default.bind(r)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentWillMount",value:function(){var e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.default.createElement(i.default,n({},this.model,this.props,this.state))}}]),t}();t.default=c},"./source/pages/forget/forget.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(){var e,t,r=this;return{onValueChange:function(e,t){var a=n({},r.state);a[e]=t,r.setState(a)},onSubmit:(e=regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n({},r.state),a={type:"driver",telephone_no:t.tele,username:t.username},e.next=4,i.default.user.forgetPassword(a);case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:window.alert("你將會在以訊息收到一個全新的密碼，請用這密碼登入"),r.props.history.push("/");case 9:case"end":return e.stop()}},e,r)}),t=function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})},function(){return t.apply(this,arguments)}),onBack:function(){r.props.history.push("/")}}};var a,o=r("./source/api/index.js"),i=(a=o)&&a.__esModule?a:{default:a}},"./source/pages/forget/forget.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,o=(n=["\n    height: 100%;\n    width: 100%;\n    background-size: cover;\n    position: absolute;\n    z-index: 0;\n    background: #000;\n\n    &> .fogrt-back{\n        &> .fogrt-back-icon{\n            height: 5rem;\n            width: 5rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n\n            &> i{\n                color: #FFF;\n                font-size: 3.5rem;\n            }\n        }\n    }\n    \n    &> .forget-wrapper{\n        margin: 5vh 10vw;\n        background: #333333;\n        padding: 5vh 10vw;\n\n        &> .forget-title{\n            display: flex;\n            justify-content: center;\n            color: #fff;\n            font-size: 1.8rem;\n            padding: 0.5rem;\n            border-bottom: 1px solid;\n        }\n    \n        &> .forget-desc{\n            margin: 1vh 0;\n            color: #FFF;\n            font-size: 1.2rem;\n        }\n    \n        &> .forget-item{\n            padding: 1rem 0px;\n    \n            &> .forget-item-title{\n                padding: 0.5rem;\n                color: #FFF;\n            }\n    \n            &> .forget-item-input{\n                &> input{\n                    width: 100%;\n                    border: 1px solid #FFF;\n                    background: #333333;\n                    font-size: 1.4rem;\n                    height: 3rem;\n                    color: #FFF;\n                    padding: 0 0.5rem;\n                }\n            }\n        }\n    \n        &> .foget-button{\n            width: 100%;\n            height: 3.4rem;\n            background: #51AF53;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            margin-top: 2rem;\n        }\n\n        &> .foget-button-back{\n            width: 100%;\n            height: 3.4rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            border: 1px solid #FFF;\n            margin-top: 2rem;\n        }\n    }\n"],a=["\n    height: 100%;\n    width: 100%;\n    background-size: cover;\n    position: absolute;\n    z-index: 0;\n    background: #000;\n\n    &> .fogrt-back{\n        &> .fogrt-back-icon{\n            height: 5rem;\n            width: 5rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n\n            &> i{\n                color: #FFF;\n                font-size: 3.5rem;\n            }\n        }\n    }\n    \n    &> .forget-wrapper{\n        margin: 5vh 10vw;\n        background: #333333;\n        padding: 5vh 10vw;\n\n        &> .forget-title{\n            display: flex;\n            justify-content: center;\n            color: #fff;\n            font-size: 1.8rem;\n            padding: 0.5rem;\n            border-bottom: 1px solid;\n        }\n    \n        &> .forget-desc{\n            margin: 1vh 0;\n            color: #FFF;\n            font-size: 1.2rem;\n        }\n    \n        &> .forget-item{\n            padding: 1rem 0px;\n    \n            &> .forget-item-title{\n                padding: 0.5rem;\n                color: #FFF;\n            }\n    \n            &> .forget-item-input{\n                &> input{\n                    width: 100%;\n                    border: 1px solid #FFF;\n                    background: #333333;\n                    font-size: 1.4rem;\n                    height: 3rem;\n                    color: #FFF;\n                    padding: 0 0.5rem;\n                }\n            }\n        }\n    \n        &> .foget-button{\n            width: 100%;\n            height: 3.4rem;\n            background: #51AF53;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            margin-top: 2rem;\n        }\n\n        &> .foget-button-back{\n            width: 100%;\n            height: 3.4rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 1.5rem;\n            color: #FFF;\n            border: 1px solid #FFF;\n            margin-top: 2rem;\n        }\n    }\n"],Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(a)}}))),i=u(r("./node_modules/react/index.js")),l=u(r("./node_modules/styled-components/dist/styled-components.browser.esm.js"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return i.default.createElement(s,null,i.default.createElement("div",{className:"forget-wrapper"},i.default.createElement("div",{className:"forget-title"},"忘記密碼"),i.default.createElement("div",{className:"forget-desc"},"如您遺失了密碼，請輸入你的註冊用戶名稱和電話，我們會產生一個全新的密碼並以訊息傳送給到您，收到密碼後，請記得更改密碼"),i.default.createElement("div",{className:"forget-item"},i.default.createElement("div",{className:"forget-item-title"},"用戶名稱"),i.default.createElement("div",{className:"forget-item-input"},i.default.createElement("input",{placeholder:"用戶名稱",value:e.username,onChange:function(t){return e.onValueChange("username",t.target.value)}}))),i.default.createElement("div",{className:"forget-item"},i.default.createElement("div",{className:"forget-item-title"},"電話號碼"),i.default.createElement("div",{className:"forget-item-input"},i.default.createElement("input",{placeholder:"電話號碼",value:e.tele,onChange:function(t){return e.onValueChange("tele",t.target.value)}}))),i.default.createElement("div",{className:"foget-button",onClick:function(){return e.onSubmit()}},"提交"),i.default.createElement("div",{className:"foget-button-back",onClick:function(){return e.onBack()}},"返回")))};var s=l.default.div(o)},"./source/pages/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r("./source/pages/login/login.jsx")),a=s(r("./source/pages/register/index.js")),o=s(r("./source/pages/main/index.js")),i=s(r("./source/pages/order/index.js")),l=s(r("./source/pages/forget/forget.jsx")),u=s(r("./source/pages/changePw/changePw.jsx"));function s(e){return e&&e.__esModule?e:{default:e}}t.default={login:n.default,register:a.default,main:o.default,order:i.default,forget:l.default,changePw:u.default}},"./source/pages/login/bg.png":function(e,t,r){e.exports=r.p+"images/194YYeTmdQ.png"},"./source/pages/login/login.css":function(e,t,r){},"./source/pages/login/login.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=m(r("./node_modules/react/index.js")),i=m(r("./source/pages/login/login.model.js")),l=m(r("./source/pages/login/login.view.jsx")),u=r("./source/modules/index.js"),s=r("./node_modules/react-redux/es/index.js"),c=r("./node_modules/react-cookie/lib/index.js"),d=m(r("./source/cookie.js")),f=m(r("./source/api/index.js")),p=m(r("./source/socket.js"));function m(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={phone:"",password:"",remainder:!1,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log(e)}}},r.model=i.default.bind(r)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentDidMount",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.cookies,this.cookie=new d.default(t.getAll()),!this.cookie.access_token){e.next=7;break}return e.next=5,f.default.user.getMe(this.cookie.userId,this.cookie.access_token);case 5:(r=e.sent)?(this.props.setUser(r,this.cookie.access_token),this.props.history.replace("/main"),p.default.whatIsMe()):this.cookie.clear(t);case 7:case 8:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})});return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return o.default.createElement(l.default,n({},this.model,this.props,this.state))}}]),t}();t.default=(0,c.withCookies)((0,s.connect)(function(e,t){return{user:e.base.user}},function(e,t){return{setUser:function(t,r){return e(u.action.base.setUser(t,r))}}})(g))},"./source/pages/login/login.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(){var e,t,r=this;return{onFieldChange:function(e,t){var a=n({},r.state);a[e]=t,r.setState(a)},submit:(e=regeneratorRuntime.mark(function e(){var t,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.phone,a=t.password,""!==n.trim()&&""!==a.trim()){e.next=3;break}return e.abrupt("return",r.model.alert("登入錯誤","用戶電話及密碼不能留空!"));case 3:return e.prev=3,e.next=6,i.default.user.login(n,a);case 6:o=e.sent,r.props.setUser(o.user,o.access_token),r.cookie.access_token=o.access_token,r.cookie.userId=o.user._id,r.cookie.save(r.props.cookies),r.props.history.replace("/main"),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",r.model.alert("登入錯誤","密碼錯誤或賑號未被認證"));case 18:r.props.history.replace("/main");case 19:case"end":return e.stop()}},e,r,[[3,14]])}),t=function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})},function(){return t.apply(this,arguments)}),alert:function(e,t){var n=JSON.parse(JSON.stringify(r.state));n.alert.title=e,n.alert.text=t,n.alert.show=!0,n.alert.type="text",r.setState(n)},handleChange:function(e,t){return function(n){var a=JSON.parse(JSON.stringify(r.state));t?a[t][e]=n:a[e]=n,r.setState(a)}}}};var a,o=r("./source/api/index.js"),i=(a=o)&&a.__esModule?a:{default:a}},"./source/pages/login/login.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("./node_modules/react/index.js"));o(r("./source/pages/login/bg.png"));r("./source/pages/login/login.css");var a=o(r("./node_modules/sweetalert-react/lib/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return n.default.createElement("div",{className:"login-container",style:{backgroundImage:"url('https://s3-ap-southeast-1.amazonaws.com/image-bucket-ken.yip/194YYeTmdQ%E6%8B%B7%E8%B2%9D.jpg')"}},"text"==e.alert.type&&n.default.createElement(a.default,{show:e.alert.show,title:e.alert.title,text:e.alert.text,onConfirm:function(t){return e.handleChange("show","alert")(!1)}}),n.default.createElement("div",{className:"login-container__dark"}),n.default.createElement("div",{className:"login-content"},n.default.createElement("div",{className:"brand"},n.default.createElement("h2",null," 的士電召 司機版 ")),n.default.createElement("p",null," 登入你的用戶 "),n.default.createElement("form",{className:"login-content__form"},n.default.createElement("div",{className:"form-group"},n.default.createElement("input",{className:"form-control",placeholder:"用戶電話",value:e.phone,type:"number",onChange:function(t){return e.onFieldChange("phone",t.target.value)}})),n.default.createElement("div",{className:"form-group"},n.default.createElement("input",{type:"password",className:"form-control",placeholder:"密碼",value:e.password,onChange:function(t){return e.onFieldChange("password",t.target.value)}})),n.default.createElement("div",{className:"form-group clearfix"},n.default.createElement("p",{className:"float-left pointer",onClick:function(t){return e.history.push("/register")}},"註冊為新用戶"),n.default.createElement("p",{className:"float-right pointer",onClick:function(t){return e.history.push("/forget")}},"忘記密碼")),n.default.createElement("button",{type:"submit",className:"btn btn-success width100",onClick:function(t){t.preventDefault(),e.submit()}},"登入")),n.default.createElement("footer",null,"@ 2018. 的士電召. All RIGHT RESERVED.")))}},"./source/pages/main/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r("./source/utils/mvp.js")),a=l(r("./source/pages/main/main.model.js")),o=l(r("./source/pages/main/main.jsx")),i=l(r("./source/pages/main/main.view.jsx"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(a.default,o.default,i.default)},"./source/pages/main/main.css":function(e,t,r){},"./source/pages/main/main.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=(o(r("./node_modules/react/index.js")),o(r("./source/utils/mvp.js")));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Presenter),n(t,[{key:"logout",value:function(){this.model.clearCookieAndGoBack()}},{key:"renewOrder",value:function(){this.model.getOrder()}},{key:"renewMe",value:function(){this.model.getMe()}},{key:"confirmOvertime",value:function(e){this.view.confirmOvertime(e)}},{key:"onChangePw",value:function(){this.model.onChangePw()}}]),t}();t.default=i},"./source/pages/main/main.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=f(r("./source/api/index.js")),i=r("./node_modules/react-redux/es/index.js"),l=f(r("./source/utils/mvp.js")),u=r("./node_modules/react-router-dom/es/index.js"),s=f(r("./source/socket.js")),c=r("./node_modules/react-cookie/lib/index.js"),d=f(r("./source/cookie.js"));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}var m=!1,g=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.tunnelSelect=function(e,t){return function(r){var n=JSON.parse(JSON.stringify(a.state));n[t][e]==r?n[t][e]="any":n[t][e]=r,a.setState(n)}},a.onChangePw=function(){a.props.history.push("/changePw")},a.handleChange=function(e,t){return function(r){var n=JSON.parse(JSON.stringify(a.state));t?n[t][e]=r:n[e]=r,a.setState(n)}},a.clearCookieAndGoBack=function(){a.cookie.clear(a.props.cookies),a.props.history.replace("/")},a.getOrder=p(regeneratorRuntime.mark(function e(){var t,i,l,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.default.order.getOrder("new"),i=o.default.order.getOrdererOrder(),l=o.default.order.getTakenOrder(),e.next=5,Promise.all([t,i,l]);case 5:u=e.sent,s=n(u,3),t=s[0],i=s[1],l=s[2],a.setState({orders:t,ordered:i,takenOrder:l});case 11:case"end":return e.stop()}},e,r)})),a.getMe=p(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.accessToken,n=a.props.user._id,e.next=4,o.default.user.getMe(n,t);case 4:i=e.sent,a.setState({me:i});case 6:case"end":return e.stop()}},e,r)})),a.state={orders:[],me:{},ordered:[],takenOrder:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Model),a(t,[{key:"componentWillMount",value:function(){var e=this;if(null==this.props.user)return this.props.history.replace("/");var t,r=this.props.cookies;this.cookie=new d.default(r.getAll()),this.getOrder(),this.getMe(),s.default.listen((t=p(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(r),!/ORDER_OVERTIME_CONFIRM-/gi.test(r)){t.next=3;break}return t.abrupt("return",e.presenter.confirmOvertime(r.split("-")[1]));case 3:t.t0=r,t.next="RENEW_ORDER_LIST"===t.t0?6:"USER_CANCEL"===t.t0?9:"DRIVER_RELEASE"===t.t0?11:"DRIVER_ACCEPT"===t.t0?13:"ORDER_OVERTIME_DEL"===t.t0?15:18;break;case 6:return t.next=8,e.getOrder();case 8:return t.abrupt("break",18);case 9:return window.alert("乘客已取消訂單"),t.abrupt("break",18);case 11:return window.alert("你所出的訂單已被其他司機放棄，如有需要請重新落單"),t.abrupt("break",18);case 13:return window.alert("你的訂單已被其他司機接受，詳情可到「已出」查閱"),t.abrupt("break",18);case 15:return t.next=17,e.getOrder();case 17:return t.abrupt("break",18);case 18:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))}},{key:"askCarNumber",value:function(){var e=p(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m=!0,setTimeout(p(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=window.prompt("請輸入你的新車牌號碼",t.props.user.vehicle_reg_no))||""===r.trim()){e.next=6;break}return e.next=4,o.default.user.updateVehicleRegNo(r);case 4:return e.next=6,t.presenter.renewMe();case 6:case"end":return e.stop()}},e,t)})),1e3);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){s.default.mute()}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.props.user&&0==m&&this.askCarNumber()}}]),t}();t.default=(0,i.connect)(function(e,t){return{user:e.base.user,accessToken:e.base.accessToken}},function(e,t){return{}})((0,u.withRouter)((0,c.withCookies)(g)))},"./source/pages/main/main.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=p(r("./node_modules/react/index.js")),o=p(r("./source/utils/mvp.js"));r("./source/pages/main/main.css");var i=p(r("./source/components/modal/modal.jsx")),l=p(r("./node_modules/sweetalert-react/lib/index.js")),u=p(r("./source/api/index.js")),s=p(r("./node_modules/moment/moment.js")),c=p(r("./source/pages/main/tunnel.svg")),d=p(r("./source/pages/main/taxi.svg")),f=r("./node_modules/react-confirm-alert/lib/index.js");function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}r("./node_modules/react-confirm-alert/src/react-confirm-alert.css");var g="undefined"!=typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return y.call(r),r.state={tab:"orders",release:{tunnel:"any",taxiType:"red",passenger:4,payment:"cash",discount:100,return:!1,fixedPrice:null,otherPhone:null,start:"",mid:"",end:""},touch:!1,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log(e)}},modal:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),n(t,[{key:"componentDidMount",value:function(){var e=m(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,g&&(this.recognition=new g,this.recognition.onstart=function(e){return r.setState({touch:!0})},this.recognition.onresult=function(e){for(var t="",n=e.resultIndex;n<e.results.length;++n)t=e.results[n][0].transcript,r.setState({touch:!1},function(e){return r.handleVoiceInput(t)})},this.recognition.onend=function(){t.setState({touch:!1})},this.recognition.onerror=function(){});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.default.createElement("div",{className:"main__background"},"text"==this.state.alert.type&&a.default.createElement(l.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,onConfirm:function(t){return e.handleChange("show","alert")(!1)}}),"input"==this.state.alert.type&&a.default.createElement(l.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,type:"input",showCancelButton:!0,onCancel:this.alertClose,inputPlaceholder:this.state.alert.placeholder,onConfirm:this.state.alert.onConfirm}),a.default.createElement("div",{className:"main__section"},"orders"==this.state.tab&&a.default.createElement(this.renderOrders,null),"released"==this.state.tab&&a.default.createElement(this.renderOrderer,null),"takenOrder"==this.state.tab&&a.default.createElement(this.takenOrder,null),"release"==this.state.tab&&a.default.createElement(this.renderRelease,this.state),"setting"==this.state.tab&&a.default.createElement(this.renderSetting,null)),a.default.createElement("div",{className:"main__sidebar"},a.default.createElement("ul",{className:"main__sidebar__list"},a.default.createElement("li",{className:"orders"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("orders")}},"接貨",a.default.createElement("br",null),a.default.createElement("div",{style:{color:"brown"}},this.props.orders.length>0?this.props.orders.length:"0")),a.default.createElement("li",{className:"release"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("release")}},"出貨"),a.default.createElement("li",{className:"takenOrder"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("takenOrder")}},"已接"),a.default.createElement("li",{className:"released"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("released")}},"已出"),a.default.createElement("li",{className:"setting"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("setting")}},"設定"))))}}]),t}(),y=function(){var e,t=this;this.confirmOvertime=function(e){(0,f.confirmAlert)({title:"時間已過",message:"你的訂單已經有一分鍾沒有任何人接單, 會在一分鍾後自動取消, 請問你要繼續嗎?",buttons:[{label:"繼續",onClick:function(){return u.default.order.overtimeOrder(e)}},{label:"不繼續",onClick:function(){return u.default.order.cancelOrder(e)}}]})},this.alertClose=function(){var e=JSON.parse(JSON.stringify(t.state));e.alert.show=!1,t.setState(e)},this.alert=function(e,r){var n=JSON.parse(JSON.stringify(t.state));n.alert.title=e,n.alert.text=r,n.alert.show=!0,n.alert.type="text",t.setState(n)},this.prompt=function(e,r,n,a){var o=JSON.parse(JSON.stringify(t.state));o.alert.title=e,o.alert.text=r,o.alert.show=!0,o.alert.type="input",o.alert.placeholder=n,o.alert.onConfirm=a,t.setState(o)},this.recognition=null,this.renderModal=function(e){if(null==t.state.modal)return a.default.createElement(a.default.Fragment,null);if("previewOrder"==t.state.modal.type){var r=t.state.modal.order;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"modal-body"},a.default.createElement("table",{className:"table table-cs check-order-table"},a.default.createElement("tbody",{style:{fontSize:"2.4rem"}},a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 起點 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ",r.start.address," ")),r.route&&a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 中途站 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ",r.route.address," ")),a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 終點 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ",r.end.address," ")),a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 的士類型 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ","green"==r.criteria.taxiType?"綠的":"red"==r.criteria.taxiType?"紅的":"藍的"," ")),a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 折扣 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ",100==r.criteria.discount?"千足金":90==r.criteria.discount?"九折":"八五折"," ")),a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 乘客人數 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ",4==r.criteria.passenger?"四人":5==r.criteria.passenger?"五人":6==r.criteria.passenger?"大 Fold":7==r.criteria.passenger?"輪椅":""," 的士 ")),a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 隧道 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ","hungHomTunnel"==r.criteria.tunnel?"紅隧":"eastTunnel"==r.criteria.tunnel?"東隧":"westTunnel"==r.criteria.tunnel?"西隧":"任行"," ")),r.criteria.return&&a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 來回 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 是 ")),r.criteria.fixedPrice&&a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 定食 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," $",r.criteria.fixedPrice," ")),r.criteria.otherPhone&&a.default.createElement("tr",null,a.default.createElement("td",{style:{fontSize:"2.4rem"}}," 另外聯絡電話 "),a.default.createElement("td",{style:{fontSize:"2.4rem"}}," ",r.criteria.otherPhone," "))))),a.default.createElement("div",{className:"modal-footer"},a.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal",onClick:function(e){t.setState({modal:null},function(e){return t.props.setShow(!1)})}},"關閉視窗"),t.props.user._id!=r.orderBy._id&&a.default.createElement("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:(n=m(regeneratorRuntime.mark(function e(n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.order.acceptOrder(r._id);case 3:a=e.sent,t.props.setShow(!1),t.setState({modal:null}),t.props.history.replace("/order/"+a.data._id),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",window.alert("無法接受這個柯打。可能已經其他司機接受。"));case 13:case"end":return e.stop()}},e,t,[[0,9]])})),function(e){return n.apply(this,arguments)})},"接受柯打")))}var n;return a.default.createElement(a.default.Fragment,null)},this.recognize=function(){var e=t;if(window.plugins&&window.plugins.speechRecognition){var r=window.plugins.speechRecognition;e.setState({touch:!0}),r.startListening(function(t){e.setState({touch:!1}),e.handleVoiceInput(t[0])},function(){return e.setState({touch:!1}),window.alert('無法識辨你的查詢, 請用"去"字分開你的起點, 終點, 及目的地')},{lang:"yue-Hant-HK",showPopup:!0,prompt:"正在聆聽 ... "})}else g?t.state.touch?t.recognition.stop():t.recognition.start():window.alert("錯誤","你的裝置並不支持語音功能")},this.renderSetting=function(e){return a.default.createElement("div",null,a.default.createElement("div",{className:"setting-container"},a.default.createElement("table",{className:"table table-cs"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 用戶名字 "),a.default.createElement("td",null," ",t.props.me.username)),a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 用戶電話 "),a.default.createElement("td",null," ",t.props.me.telephone_no)),a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 車牌號碼 "),a.default.createElement("td",null," ",t.props.me.vehicle_reg_no)),a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 建立日期 "),a.default.createElement("td",null," ",(0,s.default)(t.props.me.createdAt).format("YYYY-MM-DD")))))),a.default.createElement("ul",{className:"order__tabs center"},a.default.createElement("li",{onClick:function(e){return t.presenter.logout()}},"登出"),a.default.createElement("li",null," 使用條款 "),a.default.createElement("li",{onClick:(r=m(regeneratorRuntime.mark(function e(r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=window.prompt("請輸入你的新車牌號碼",t.props.user.vehicle_reg_no))||""===n.trim()){e.next=7;break}return e.next=4,u.default.user.updateVehicleRegNo(n);case 4:return e.next=6,t.presenter.renewMe();case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",window.alert("輸入不正確","你所輸入的車牌號碼不正確! "));case 8:case"end":return e.stop()}},e,t)})),function(e){return r.apply(this,arguments)})},"修改車牌"),a.default.createElement("li",{onClick:function(e){return t.presenter.onChangePw()}},"更改密碼")));var r},this.renderRelease=function(e){return a.default.createElement("div",{className:"order__release"},a.default.createElement("div",{className:"order__form"},a.default.createElement("div",{className:"order__form__left"},a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"order_select-input",placeholder:"起點",value:e.release.start,onChange:function(e){return t.handleChange("start","release")(e.target.value)}})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"order_select-input",placeholder:"中途站",value:e.release.mid,onChange:function(e){return t.handleChange("mid","release")(e.target.value)}})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"order_select-input",placeholder:"終點",value:e.release.end,onChange:function(e){return t.handleChange("end","release")(e.target.value)}}))),a.default.createElement("div",{className:"order__form__right"},a.default.createElement("div",{className:"order__form__record-button",onClick:function(e){return t.recognize()}},a.default.createElement("i",{className:"icon-volume-medium",style:{color:t.state.touch?"white":"black"}})))),a.default.createElement("div",{className:"order__select"},a.default.createElement("div",{className:"order-select-list"},a.default.createElement("div",{className:"hungHomTunnel"==t.state.release.tunnel?"order-icon-tunnel bg-red":"order-icon-tunnel",onClick:function(e){return t.tunnelSelect("tunnel","release")("hungHomTunnel")}},a.default.createElement("img",{className:"order-icon-tunnel-img",src:c.default}),a.default.createElement("div",{className:"order-icon-tunnel-title"},"紅")),a.default.createElement("div",{className:"eastTunnel"==t.state.release.tunnel?"order-icon-tunnel bg-honey":"order-icon-tunnel",onClick:function(e){return t.tunnelSelect("tunnel","release")("eastTunnel")}},a.default.createElement("img",{className:"order-icon-tunnel-img",src:c.default}),a.default.createElement("div",{className:"order-icon-tunnel-title"},"東")),a.default.createElement("div",{className:"westTunnel"==t.state.release.tunnel?"order-icon-tunnel bg-seagreen":"order-icon-tunnel",onClick:function(e){return t.tunnelSelect("tunnel","release")("westTunnel")}},a.default.createElement("img",{className:"order-icon-tunnel-img",src:c.default}),a.default.createElement("div",{className:"order-icon-tunnel-title"},"西"))),a.default.createElement("div",{className:"order-select-list"},a.default.createElement("div",{className:"red"==t.state.release.taxiType?"order-icon-tunnel bg-red":"order-icon-tunnel",onClick:function(e){return t.handleChange("taxiType","release")("red")}},a.default.createElement("img",{className:"order-icon-taxi",src:d.default}),a.default.createElement("div",{className:"order-icon-taxi-title"},"紅")),a.default.createElement("div",{className:"green"==t.state.release.taxiType?"order-icon-tunnel bg-seagreen":"order-icon-tunnel",onClick:function(e){return t.handleChange("taxiType","release")("green")}},a.default.createElement("img",{className:"order-icon-taxi",src:d.default}),a.default.createElement("div",{className:"order-icon-taxi-title"},"綠")),a.default.createElement("div",{className:"blue"==t.state.release.taxiType?"order-icon-tunnel bg-deepblue":"order-icon-tunnel",onClick:function(e){return t.handleChange("taxiType","release")("blue")}},a.default.createElement("img",{className:"order-icon-taxi",src:d.default}),a.default.createElement("div",{className:"order-icon-taxi-title"},"藍"))),a.default.createElement("div",{className:"order-select-list"},a.default.createElement("div",{className:4==t.state.release.passenger?"order-select-row-item bg-honey":"order-select-row-item",onClick:function(e){return t.handleChange("passenger","release")(4)}},"4人"),a.default.createElement("div",{className:5==t.state.release.passenger?"order-select-row-item bg-honey":"order-select-row-item",onClick:function(e){return t.handleChange("passenger","release")(5)}},"5人"),a.default.createElement("div",{className:6==t.state.release.passenger?"order-select-row-item bg-honey":"order-select-row-item",onClick:function(e){return t.handleChange("passenger","release")(6)}},"大Ford")),a.default.createElement("div",{className:"order-select-list"},a.default.createElement("div",{className:t.state.release.return?"order-select-row-item bg-honey":"order-select-row-item",onClick:function(e){return t.handleChange("return","release")(!t.state.release.return)}},"來回"),a.default.createElement("div",{className:t.state.release.fixedPrice?"order-select-row-item bg-honey":"order-select-row-item",onClick:function(e){var r=window.prompt("定食 (請輸入預定訂單價錢)");""==r.trim()?t.handleChange("fixedPrice","release")(null):isNaN(parseInt(r))||parseInt(r)<1?window.alert("輸入不正確","你所輸入的訂單價錢不正確! "):t.handleChange("fixedPrice","release")(parseInt(r))}},a.default.createElement("div",null,a.default.createElement("div",{className:"order-select-row-item-big-price"},"定食"),t.state.release.fixedPrice&&a.default.createElement("div",{className:"order-select-row-item-big-price"},"$",t.state.release.fixedPrice))),a.default.createElement("div",{className:t.state.release.otherPhone?"order-select-row-item bg-honey":"order-select-row-item",onClick:function(e){var r=window.prompt("另外聯絡（如想司機直接聯絡客人請輸入）");""==r.trim()?t.handleChange("otherPhone","release")(null):isNaN(parseInt(r))?window.alert("輸入不正確","你所輸入的電話號碼不正確! "):t.handleChange("otherPhone","release")(parseInt(r))}},a.default.createElement("div",null,a.default.createElement("div",{className:"order-select-row-item-big-price"},"另外聯絡"),t.state.release.otherPhone&&a.default.createElement("div",{className:"order-select-row-item-big-price"},t.state.release.otherPhone)))),a.default.createElement("div",{className:"order-select-confirm-list"},a.default.createElement("div",{className:"order-select-confirm-item bg-jet",onClick:function(e){return t.orderSubmit(100)}},a.default.createElement("div",null,a.default.createElement("div",{className:"order-select-confirm-item-title"},"千足金"),a.default.createElement("div",{className:"order-select-confirm-item-title"},"確定"))),a.default.createElement("div",{className:"order-select-confirm-item bg-taupe",onClick:function(e){return t.orderSubmit(90)}},a.default.createElement("div",null,a.default.createElement("div",{className:"order-select-confirm-item-title"},"九仔"),a.default.createElement("div",{className:"order-select-confirm-item-title"},"確定"))),a.default.createElement("div",{className:"order-select-confirm-item bg-wenge",onClick:function(e){return t.orderSubmit(85)}},a.default.createElement("div",null,a.default.createElement("div",{className:"order-select-confirm-item-title"},"會員柯"),a.default.createElement("div",{className:"order-select-confirm-item-title"},"確定"))))))},this.orderSubmit=(e=m(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleChange("discount","release")(r);case 2:if(""!=t.state.release.start&&""!=t.state.release.end){e.next=4;break}return e.abrupt("return",window.alert("請填寫你的起點及終點"));case 4:return e.prev=4,e.next=7,u.default.order.makeOrder(t.state.release.start,t.state.release.mid,t.state.release.end,{taxiType:t.state.release.taxiType,discount:t.state.release.discount,tunnel:t.state.release.tunnel,passenger:t.state.release.passenger,fixedPrice:t.state.release.fixedPrice,return:t.state.release.return,payment:t.state.release.payment,otherPhone:t.state.release.otherPhone});case 7:window.alert("你已經成功送出柯打, 你可以在已出tab 或接貨頁面中查看或取消柯打"),t.setState({release:{tunnel:"any",taxiType:"red",passenger:4,payment:"cash",discount:100,return:!1,fixedPrice:null,start:"",mid:"",end:"",otherPhone:null}},function(e){return t.presenter.renewOrder()}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),window.alert("請檢查你的起點及終點 (提示: 使用一些比較有指標性的名字)");case 14:case"end":return e.stop()}},e,t,[[4,11]])})),function(t){return e.apply(this,arguments)}),this.handleVoiceInput=function(e){var r=e.split("去"),n=JSON.parse(JSON.stringify(t.state));return 3==r.length?(n.release.start=r[0],n.release.mid=r[1],n.release.end=r[2],t.setState(n)):2==r.length?(n.release.start=r[0],n.release.mid="",n.release.end=r[1],t.setState(n)):window.alert('無法識辨你的查詢, 請用"去"字分開你的起點, 終點, 及目的地')},this.takenOrder=function(e){return a.default.createElement("div",{className:"order__list"},t.props.takenOrder.map(t.takenOrderItem))},this.takenOrderItem=function(e,r){console.log("====================takenOrde======================"),console.log(e);var n=100==e.criteria.discount?"yellow":90==e.criteria.discount?"green":"white";return a.default.createElement("div",{className:"order",key:r},a.default.createElement("div",{className:"order__from_to",style:{color:n},onClick:function(r){t.props.setHeader("查看柯打"),t.setState(function(r){return t.props.history.replace("/order/"+e._id)})}},a.default.createElement("div",{className:"from"}," ",e.start.address," "),a.default.createElement("i",{className:"icon-arrow-right7"}),a.default.createElement("div",{className:"to"}," ",e.end.address," ")),a.default.createElement("ul",{className:"order__tabs"},"accepted"==e.status&&a.default.createElement("li",{style:{backgroundColor:"green"}},"已接受"),"confirmed"==e.status&&a.default.createElement("li",{style:{backgroundColor:"steelblue"}},"已確定"),"commented"==e.status&&a.default.createElement("li",{style:{backgroundColor:"cadetblue"}},"已評價"),a.default.createElement("li",{style:{backgroundColor:e.criteria.taxiType}},"green"==e.criteria.taxiType?"綠的":"red"==e.criteria.taxiType?"紅的":"藍的"),a.default.createElement("li",{style:{backgroundColor:"green"}},100==e.criteria.discount?"千足金":90==e.criteria.discount?"九折":"八五折"),a.default.createElement("li",{style:{backgroundColor:"green"}},4==e.criteria.passenger?"四人":5==e.criteria.passenger?"五人":6==e.criteria.passenger?"大Fold":7==e.criteria.passenger?"輪椅":""," 的士"),("hungHomTunnel"==e.criteria.tunnel||"eastTunnel"==e.criteria.tunnel||"westTunnel"==e.criteria.tunnel)&&a.default.createElement("li",{style:{backgroundColor:"green"}},"hungHomTunnel"==e.criteria.tunnel?"紅隧":"eastTunnel"==e.criteria.tunnel?"東隧":"westTunnel"==e.criteria.tunnel?"西隧":"任行"),e.criteria.return&&a.default.createElement("li",{style:{backgroundColor:"green"}},"來回"),e.criteria.fixedPrice&&a.default.createElement("li",{style:{backgroundColor:"green"}},"$ ",e.criteria.fixedPrice),e.criteria.otherPhone&&a.default.createElement("li",{style:{backgroundColor:"green"}},"聯絡電話: ",e.criteria.otherPhone)),e.criteria.required&&a.default.createElement("div",{className:"order__remark"}," 備註: ",e.criteria.required," "))},this.renderOrderer=function(e){return a.default.createElement("div",{className:"order__list"},t.props.ordered.map(t.renderOrdered))},this.renderOrdered=function(e,r){var n=100==e.criteria.discount?"yellow":90==e.criteria.discount?"green":"white";return a.default.createElement("div",{className:"order",key:r},a.default.createElement("div",{className:"order__from_to",style:{color:n},onClick:function(r){t.props.setHeader("查看柯打"),t.setState(function(r){return t.props.history.replace("/order/"+e._id)})}},a.default.createElement("div",{className:"from"}," ",e.start.address," "),a.default.createElement("i",{className:"icon-arrow-right7"}),a.default.createElement("div",{className:"to"}," ",e.end.address," ")),a.default.createElement("ul",{className:"order__tabs"},a.default.createElement("li",{style:{backgroundColor:"red"},onClick:m(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.default.order.makeOrder(e.start.address,e.mid?e.mid.address:"",e.end.address,{taxiType:e.criteria.taxiType,discount:e.criteria.discount,tunnel:e.criteria.tunnel,passenger:e.criteria.passenger});case 2:window.alert("成功重出柯打, 你可以在已出tab 或接貨頁面中查看或取消柯打"),t.presenter.renewOrder();case 4:case"end":return r.stop()}},r,t)}))},"重出"),"new"==e.status&&a.default.createElement("li",{style:{backgroundColor:"red"},onClick:m(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.default.order.cancelOrder(e._id);case 2:return r.next=4,t.presenter.renewOrder();case 4:window.alert("成功刪除柯打!");case 5:case"end":return r.stop()}},r,t)}))},"刪除"),"canceled"==e.status&&a.default.createElement("li",{style:{backgroundColor:"red"}},"已取消"),"accepted"==e.status&&a.default.createElement("li",{style:{backgroundColor:"green"}},"已接受"),"accepted"==e.status&&a.default.createElement("li",{style:{backgroundColor:"green"}},"會員 ",e.acceptBy.username),a.default.createElement("li",{style:{backgroundColor:e.criteria.taxiType}},"green"==e.criteria.taxiType?"綠的":"red"==e.criteria.taxiType?"紅的":"藍的"),a.default.createElement("li",{style:{backgroundColor:"green"}},100==e.criteria.discount?"千足金":90==e.criteria.discount?"九折":"八五折"),a.default.createElement("li",{style:{backgroundColor:"green"}},4==e.criteria.passenger?"四人":5==e.criteria.passenger?"五人":6==e.criteria.passenger?"大Fold":7==e.criteria.passenger?"輪椅":""," 的士"),("hungHomTunnel"==e.criteria.tunnel||"eastTunnel"==e.criteria.tunnel||"westTunnel"==e.criteria.tunnel)&&a.default.createElement("li",{style:{backgroundColor:"green"}},"hungHomTunnel"==e.criteria.tunnel?"紅隧":"eastTunnel"==e.criteria.tunnel?"東隧":"westTunnel"==e.criteria.tunnel?"西隧":"任行"),e.criteria.return&&a.default.createElement("li",{style:{backgroundColor:"green"}},"來回"),e.criteria.fixedPrice&&a.default.createElement("li",{style:{backgroundColor:"green"}},"$ ",e.criteria.fixedPrice),e.criteria.otherPhone&&a.default.createElement("li",{style:{backgroundColor:"green"}},"聯絡電話: ",e.criteria.otherPhone)),e.criteria.required&&a.default.createElement("div",{className:"order__remark"}," 備註: ",e.criteria.required," "))},this.renderOrders=function(e){return a.default.createElement("div",{className:"order__list"},console.log(t.props),t.props.orders.map(t.renderOrder))},this.renderOrder=function(e,r){var n=100==e.criteria.discount?"yellow":90==e.criteria.discount?"green":"white";return a.default.createElement("div",{className:"order",key:r},a.default.createElement("div",{className:"order__from_to",style:{color:n},onClick:function(r){t.props.setHeader("查看柯打"),t.setState({modal:{type:"previewOrder",order:e}},function(e){return t.props.setShow(!0)})}},a.default.createElement("div",{className:"order__from-to-title"},e.start.address),e.route&&a.default.createElement("i",{className:"icon-arrow-right7"}),e.route&&a.default.createElement("div",{className:"order__from-to-title"},e.route.address),a.default.createElement("i",{className:"icon-arrow-right7"}),a.default.createElement("div",{className:"order__from-to-title"},e.end.address)),a.default.createElement("ul",{className:"order__tabs"},t.props.user._id==e.orderBy._id&&a.default.createElement("li",{style:{backgroundColor:"red"},onClick:m(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.default.order.cancelOrder(e._id);case 2:return r.next=4,t.presenter.renewOrder();case 4:window.alert("成功刪除柯打!");case 5:case"end":return r.stop()}},r,t)}))},"刪除"),a.default.createElement("li",null," 會員 ",e.orderBy.username," "),"accepted"==e.status&&a.default.createElement("li",{style:{backgroundColor:"green"}},"會員 ",e.acceptBy.username),a.default.createElement("li",{style:{backgroundColor:e.criteria.taxiType}},"green"==e.criteria.taxiType?"綠的":"red"==e.criteria.taxiType?"紅的":"藍的"),a.default.createElement("li",{style:{backgroundColor:"green"}},100==e.criteria.discount?"千足金":90==e.criteria.discount?"九折":"八五折"),a.default.createElement("li",{style:{backgroundColor:"green"}},4==e.criteria.passenger?"四人":5==e.criteria.passenger?"五人":6==e.criteria.passenger?"珍寶":7==e.criteria.passenger?"輪椅":""," 的士"),("hungHomTunnel"==e.criteria.tunnel||"eastTunnel"==e.criteria.tunnel||"westTunnel"==e.criteria.tunnel)&&a.default.createElement("li",{style:{backgroundColor:"green"}},"hungHomTunnel"==e.criteria.tunnel?"紅隧":"eastTunnel"==e.criteria.tunnel?"東隧":"westTunnel"==e.criteria.tunnel?"西隧":"任行"),e.criteria.return&&a.default.createElement("li",{style:{backgroundColor:"green"}},"來回"),e.criteria.fixedPrice&&a.default.createElement("li",{style:{backgroundColor:"green"}},"$ ",e.criteria.fixedPrice),e.criteria.otherPhone&&a.default.createElement("li",{style:{backgroundColor:"green"}},"聯絡電話: ",e.criteria.otherPhone)),e.criteria.required&&a.default.createElement("div",{className:"order__remark"}," 備註: ",e.criteria.required," "))},this.handleChange=function(e,r){return function(n){var a=JSON.parse(JSON.stringify(t.state));r?a[r][e]=n:a[e]=n,t.setState(a)}}};t.default=(0,i.default)(h)},"./source/pages/main/taxi.svg":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTU3NzY5NzAxODA5IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIwNjciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNODQxLjc0NzExOSA5MzkuOTk5ODY0Yy01OC40MjU2NjcgMC0xMDUuOTU4MjQtNDcuNTMyNTczLTEwNS45NTgyNC0xMDUuOTU4MjRsMC0xNC44NTMyODktNDUyLjU0NjkzMyAwIDAgMTQuODUzMjg5YzAgNTguNDI1NjY3LTQ3LjUzMjU3MyAxMDUuOTU4MjQtMTA1Ljk1ODI0IDEwNS45NTgyNFM3MS4zMjY0ODkgODkyLjQ2NzI5MSA3MS4zMjY0ODkgODM0LjA0MTYyNGwwLTE0Ljg1MzI4OUw0MS4zNzEyNDYgODE5LjE4ODMzNGMtMTcuMDc1OTExIDAtMzAuNDUwNTIzLTEzLjM2MTMwOS0zMC40NTA1MjMtMzAuNDE3Nzc3bDAtMTgxLjIxNzI5NWMwLTMyLjQxNDI0NyAxMi41NzQzODctNjIuODQyMjU3IDM1LjQwNjM5NC04NS42NzkzODEgMjIuODMyMDA4LTIyLjgzNjEwMSA1My4yNTA4MDgtMzUuNDEzNTU4IDg1LjY1Mjc3NS0zNS40MTM1NThsMS4yMzMwODQgMCA0Ni42NTc2NDYtMTg2LjExMTc2OGMxNi4yNDQ5ODYtNjYuMDU0NDE1IDgwLjA2MjQ1NC0xMTUuOTE2MDMzIDE0OC40Mjc0OTQtMTE1LjkxNjAzM2w0NS4wNTYxNzIgMEwzNzMuMzU0MjkgOTQuMDM3NzQ2YzAtMTcuMDU1NDQ0IDEzLjM3NTYzNS0zMC40MTY3NTMgMzAuNDUwNTIzLTMwLjQxNjc1M0w2MTUuMjI2MDEzIDYzLjYyMDk5M2MxNy4wNzQ4ODcgMCAzMC40NTA1MjMgMTMuMzYwMjg2IDMwLjQ1MDUyMyAzMC40MTY3NTNsMCA5MC4zOTQ3NzYgNDUuMDU2MTcyIDBjNjguMzY1MDQxIDAgMTMyLjE4MjUwOCA0OS44NjE2MTggMTQ4LjQ0NDg5IDExNS45ODI1NDhsNDYuNjQwMjUgMTg2LjA0NTI1MyAxLjIzMjA2MSAwYzMyLjQwMjk5MSAwIDYyLjgyMTc5MSAxMi41Nzc0NTYgODUuNjUyNzc1IDM1LjQxMzU1OCAyMi44MzMwMzEgMjIuODM3MTI0IDM1LjQwNzQxOCA1My4yNjYxNTggMzUuNDA3NDE4IDg1LjY3OTM4MWwwIDE4MS4yMTcyOTVjMCAxNy4wNTY0NjgtMTMuMzc1NjM1IDMwLjQxNzc3Ny0zMC40NTE1NDYgMzAuNDE3Nzc3bC0yOS45NTQyMTkgMCAwIDE0Ljg1MzI4OUM5NDcuNzA0MzM2IDg5Mi40NjcyOTEgOTAwLjE3Mjc4NyA5MzkuOTk5ODY0IDg0MS43NDcxMTkgOTM5Ljk5OTg2NHpNMjUyLjU0Mjc2IDc4OC40ODkxNDhsNTEzLjk0NTMwNSAwIDAgNDUuNTUyNDc1YzAgNDEuNDk4MTM2IDMzLjc2MDkxOCA3NS4yNTkwNTQgNzUuMjU5MDU0IDc1LjI1OTA1NHM3NS4yNTgwMzEtMzMuNzYwOTE4IDc1LjI1ODAzMS03NS4yNTkwNTRsMC00NS41NTI0NzUgNjAuNDAwNjQ4IDAgMC4wMDUxMTctMTgwLjkzNDg2MmMwLTQ5Ljg0MzE5OC00MC41MzUyMDUtOTAuMzkzNzUzLTkwLjM2MTAwNy05MC4zOTM3NTNsLTI1LjE4NTYxMiAwTDgwOS4zODMwMTQgMzA3LjgxMzU3NGMtMTMuMDAzMTUyLTUyLjg2NjA0NS02NC4wMDQ3MzMtOTIuNjgxODY2LTExOC42NTAzMDctOTIuNjgxODY2bC03NS43NTUzNTggMEw2MTQuOTc3MzQ5IDk0LjMyMDE3OSA0MDQuMDU4NTkyIDk0LjMyMDE3OWwtMC4wMDUxMTcgMTIwLjgxMTUzLTc1Ljc1NTM1OCAwYy01NC42NDY1OTggMC0xMDUuNjQ4MTc5IDM5LjgxNTgyMS0xMTguNjMzOTM0IDkyLjYxNTM1MWwtNTIuNDk4Njc4IDIwOS40MTI0NUwxMzEuOTc5ODk0IDUxNy4xNTk1MWMtNDkuODI0Nzc5IDAtOTAuMzU5OTg0IDQwLjU1MDU1NS05MC4zNTk5ODQgOTAuMzkzNzUzbDAgMTgwLjkzNDg2MiA2MC40MDU3NjUgMCAwIDQ1LjU1MjQ3NWMwIDQxLjQ5ODEzNiAzMy43NjA5MTggNzUuMjU5MDU0IDc1LjI1OTA1NCA3NS4yNTkwNTRzNzUuMjU5MDU0LTMzLjc2MDkxOCA3NS4yNTkwNTQtNzUuMjU5MDU0TDI1Mi41NDM3ODMgNzg4LjQ4OTE0OHpNODQxLjc0NzExOSA3NDMuNzE2NDMyYy01MC4wOTkwMjUgMC05MC44NTczMTEtNDAuNzczNjM1LTkwLjg1NzMxMS05MC44OTEwOHM0MC43NTgyODYtOTAuODkxMDggOTAuODU3MzExLTkwLjg5MTA4YzUwLjA5ODAwMiAwIDkwLjg1NjI4NyA0MC43NzM2MzUgOTAuODU2Mjg3IDkwLjg5MTA4Uzg5MS44NDUxMjEgNzQzLjcxNjQzMiA4NDEuNzQ3MTE5IDc0My43MTY0MzJ6TTg0MS43NDcxMTkgNTkyLjYzMjQzNWMtMzMuMTcxNDk0IDAtNjAuMTU4MTI1IDI3LjAwMTk4MS02MC4xNTgxMjUgNjAuMTkxODk0czI2Ljk4NjYzMSA2MC4xOTE4OTQgNjAuMTU4MTI1IDYwLjE5MTg5NGMzMy4xNzA0NyAwIDYwLjE1NzEwMS0yNy4wMDE5ODEgNjAuMTU3MTAxLTYwLjE5MTg5NFM4NzQuOTE3NTkgNTkyLjYzMjQzNSA4NDEuNzQ3MTE5IDU5Mi42MzI0MzV6TTE3Ny4yODQ3MjkgNzQzLjcxNjQzMmMtNTAuMDk5MDI1IDAtOTAuODU2Mjg3LTQwLjc3MzYzNS05MC44NTYyODctOTAuODkxMDhzNDAuNzU4Mjg2LTkwLjg5MTA4IDkwLjg1NjI4Ny05MC44OTEwOCA5MC44NTczMTEgNDAuNzczNjM1IDkwLjg1NzMxMSA5MC44OTEwOFMyMjcuMzgyNzMxIDc0My43MTY0MzIgMTc3LjI4NDcyOSA3NDMuNzE2NDMyek0xNzcuMjg0NzI5IDU5Mi42MzI0MzVjLTMzLjE3MTQ5NCAwLTYwLjE1NzEwMSAyNy4wMDE5ODEtNjAuMTU3MTAxIDYwLjE5MTg5NHMyNi45ODY2MzEgNjAuMTkxODk0IDYwLjE1NzEwMSA2MC4xOTE4OTQgNjAuMTU4MTI1LTI3LjAwMTk4MSA2MC4xNTgxMjUtNjAuMTkxODk0UzIxMC40NTUxOTkgNTkyLjYzMjQzNSAxNzcuMjg0NzI5IDU5Mi42MzI0MzV6TTc2OC44OTE4MTEgNTE3LjE2MDUzMyAyNTAuMTM5MDE0IDUxNy4xNjA1MzNsNDYuODQwODE4LTE4Ny44ODYxODFjMy4zMTU1MTItMTIuMTI3MjAyIDE4LjgyNzgxMS0yNC4wMzAyOTkgMzEuMzE4Mjg2LTI0LjAzMDI5OWwzNjIuNDM0NTg5IDBjMTIuNDkxNDk5IDAgMjguMDAzNzk3IDExLjkwMzA5OCAzMS4zMTgyODYgMjQuMDMxMzIzbDAuMDg2OTgxIDAuMzMzNTk4TDc2OC44OTE4MTEgNTE3LjE2MDUzM3pNMjg5LjQzMDkwMiA0ODYuNDYxMzQ3bDQ0MC4xNzAwNDUgMEw2OTIuNzMyMjQ4IDMzOC41NjM5MjZjLTAuODEyNTA1LTAuODk5NDg2LTIuMjk4MzQ2LTIuMDY2MDU1LTMuMzQwMDcxLTIuNjIxNzFsLTM1OS43NTM1MjcgMGMtMS4wNDI3NDkgMC41NTQ2MzItMi41Mjc1NjYgMS43MjIyMjQtMy4zNDAwNzEgMi42MjE3MUwyODkuNDMwOTAyIDQ4Ni40NjEzNDd6IiBwLWlkPSIyMDY4IiBmaWxsPSIjZmZmZmZmIj48L3BhdGg+PC9zdmc+"},"./source/pages/main/tunnel.svg":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTU3NzY1ODk0NDY1IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUzNCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9Ik05OTUuNTU1NTU2IDEwMjRoLTU2Ljg4ODg4OWMtMTUuNjQ0NDQ0IDAtMjguNDQ0NDQ0LTEyLjgtMjguNDQ0NDQ1LTI4LjQ0NDQ0NFY1MTJjMC0yMTkuNTkxMTExLTE3OC42MzExMTEtMzk4LjIyMjIyMi0zOTguMjIyMjIyLTM5OC4yMjIyMjJTMTEzLjc3Nzc3OCAyOTIuNDA4ODg5IDExMy43Nzc3NzggNTEydjQ4My41NTU1NTZjMCAxNS42NDQ0NDQtMTIuOCAyOC40NDQ0NDQtMjguNDQ0NDQ1IDI4LjQ0NDQ0NEgyOC40NDQ0NDRjLTE1LjY0NDQ0NCAwLTI4LjQ0NDQ0NC0xMi44LTI4LjQ0NDQ0NC0yOC40NDQ0NDRWNTEyQzAgMjI5LjY2MDQ0NCAyMjkuNjg4ODg5IDAgNTEyIDBzNTEyIDIyOS42NjA0NDQgNTEyIDUxMnY0ODMuNTU1NTU2YzAgMTUuNjQ0NDQ0LTEyLjggMjguNDQ0NDQ0LTI4LjQ0NDQ0NCAyOC40NDQ0NDR6TTE5OS4xMTExMTEgNjgyLjY2NjY2N2gyOC40NDQ0NDVjNjIuNTc3Nzc4IDAgMTEzLjc3Nzc3OCA1MS4yIDExMy43Nzc3NzcgMTEzLjc3Nzc3N3YxMTMuNzc3Nzc4YzAgNjIuNTc3Nzc4LTUxLjIgMTEzLjc3Nzc3OC0xMTMuNzc3Nzc3IDExMy43Nzc3NzhIMTk5LjExMTExMWMtMTUuNjQ0NDQ0IDAtMjguNDQ0NDQ0LTEyLjgtMjguNDQ0NDQ0LTI4LjQ0NDQ0NFY3MTEuMTExMTExYzAtMTUuNjQ0NDQ0IDEyLjgtMjguNDQ0NDQ0IDI4LjQ0NDQ0NC0yOC40NDQ0NDR6IG01OTcuMzMzMzMzIDBoMjguNDQ0NDQ1YzE1LjY0NDQ0NCAwIDI4LjQ0NDQ0NCAxMi44IDI4LjQ0NDQ0NCAyOC40NDQ0NDR2Mjg0LjQ0NDQ0NWMwIDE1LjY0NDQ0NC0xMi44IDI4LjQ0NDQ0NC0yOC40NDQ0NDQgMjguNDQ0NDQ0aC0yOC40NDQ0NDVjLTYyLjU3Nzc3OCAwLTExMy43Nzc3NzgtNTEuMi0xMTMuNzc3Nzc3LTExMy43Nzc3Nzh2LTExMy43Nzc3NzhjMC02Mi41Nzc3NzggNTEuMi0xMTMuNzc3Nzc4IDExMy43Nzc3NzctMTEzLjc3Nzc3N3oiIHAtaWQ9IjUzNSIgZmlsbD0iI2ZmZmZmZiI+PC9wYXRoPjwvc3ZnPg=="},"./source/pages/order/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r("./source/utils/mvp.js")),a=l(r("./source/pages/order/order.model.js")),o=l(r("./source/pages/order/order.jsx")),i=l(r("./source/pages/order/order.view.jsx"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(a.default,o.default,i.default)},"./source/pages/order/map.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r("./node_modules/react/index.js"),i=(n=o)&&n.__esModule?n:{default:n},l=r("./node_modules/react-google-maps/lib/index.js");var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={directions:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),a(t,[{key:"componentDidMount",value:function(){var e=this,t=new google.maps.DirectionsService,r={origin:new google.maps.LatLng(this.props.origin.lat,this.props.origin.lng),destination:new google.maps.LatLng(this.props.destination.lat,this.props.destination.lng),travelMode:google.maps.TravelMode.DRIVING,optimizeWaypoints:!0};this.props.route&&(r.waypoints=[{location:new google.maps.LatLng(this.props.route.lat,this.props.route.lng),stopover:!0}]),t.route(r,function(t,r){r===google.maps.DirectionsStatus.OK?e.setState({directions:t}):console.error("error fetching directions "+t)})}},{key:"componentWillUnmount",value:function(){this.setState({directions:null})}},{key:"render",value:function(){var e=this,t=this.props.location||{lat:22.3699122,lng:114.11443068},r=(this.props.directions,(0,l.withGoogleMap)(function(r){return i.default.createElement(l.GoogleMap,{defaultZoom:16,center:t},e.state.directions&&i.default.createElement(l.DirectionsRenderer,{directions:e.state.directions}))})),n=this.props.height||"420px",a=this.props.width||"100%";return i.default.createElement("div",null,i.default.createElement(r,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA83jZKHRmlOFXwdDM81X_pl7kyLb5o4FI&v=3.exp&libraries=geometry,drawing,places",mapElement:i.default.createElement("div",{style:{height:"100%"}}),containerElement:i.default.createElement("div",{style:{height:n,width:a,overflow:"hidden"}}),loadingElement:i.default.createElement("div",{style:{height:"300px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},i.default.createElement("h1",{className:"loading-text"}," Loading ... "))}))}}]),t}();t.default=u},"./source/pages/order/order.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(r("./node_modules/react/index.js"));var n=a(r("./source/utils/mvp.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Presenter),t}();t.default=o},"./source/pages/order/order.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o(r("./source/api/index.js"));var n=r("./node_modules/react-redux/es/index.js"),a=o(r("./source/utils/mvp.js"));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),t}();t.default=(0,n.connect)(function(e,t){return{user:e.base.user}},function(e,t){return{}})(i)},"./source/pages/order/order.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=y(r("./node_modules/react/index.js")),o=y(r("./source/utils/mvp.js")),i=y(r("./source/pages/order/map.jsx")),l=r("./source/utils/react-orientation.js"),u=y(l),s=y(r("./source/api/index.js"));r("./source/pages/order/style.css");var c=y(r("./node_modules/sweetalert-react/lib/index.js")),d=r("./node_modules/react-router-dom/es/index.js"),f=r("./node_modules/react-cookie/lib/index.js"),p=y(r("./source/cookie.js")),m=y(r("./source/socket.js")),g=r("./node_modules/react-redux/es/index.js"),h=y(r("./node_modules/moment/moment.js"));function y(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}r("./node_modules/moment/locale/zh-hk.js");var w=function(e,t){return"https://www.google.com/maps?saddr="+e.lat+","+e.lng+"&daddr="+t.lat+","+t.lng},b=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getMe=v(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.accessToken,a=n.props.user._id,e.next=4,s.default.user.getMe(a,t);case 4:o=e.sent,n.setState({me:o});case 6:case"end":return e.stop()}},e,r)})),n.alert=function(e,t,r){var a=JSON.parse(JSON.stringify(n.state));a.alert.title=e,a.alert.text=t,a.alert.show=!0,a.alert.type="text",a.alert.onConfirm=r,n.setState(a)},n.renderPortrait=function(e){return h.default.locale("zh-hk"),a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,{height:"50%",origin:n.state.order.start,destination:n.state.order.end,route:n.state.order.route}),a.default.createElement("div",{className:"order_panel"},a.default.createElement("h4",{style:{padding:"0 5px"}}," 訂單資料 "),a.default.createElement("div",{style:{height:"calc( 50% - 135px )",overflowY:"scroll"}},a.default.createElement("table",{className:"table table-cs"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",null," 起點 "),a.default.createElement("td",null,null!=n.state.myLoc&&a.default.createElement("a",{href:w(n.state.myLoc,n.state.order.start)}," ",n.state.order.start.address),null==n.state.myLoc&&a.default.createElement("span",null," ",n.state.order.start.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),n.state.order.route&&a.default.createElement("tr",null,a.default.createElement("td",null," 中途站 "),a.default.createElement("td",null,a.default.createElement("a",{href:w(n.state.order.start,n.state.order.route)}," ",n.state.order.route.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 終點 "),a.default.createElement("td",null,a.default.createElement("a",{href:w(n.state.order.route?n.state.order.route:n.state.order.start,n.state.order.end)}," ",n.state.order.end.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 折扣 "),a.default.createElement("td",null," ",100==n.state.order.criteria.discount?"原價":90==n.state.order.criteria.discount?"九折":"公司價")),n.state.order.criteria.return&&a.default.createElement("tr",null,a.default.createElement("td",null," 來回 "),a.default.createElement("td",null," 是")),n.state.order.criteria.fixedPrice&&a.default.createElement("tr",null,a.default.createElement("td",null," 定食 "),a.default.createElement("td",null," $ ",n.state.order.criteria.fixedPrice)),n.state.order.criteria.otherPhone&&a.default.createElement("tr",null,a.default.createElement("td",null," 另外聯絡電話 "),a.default.createElement("td",null," ",n.state.order.criteria.otherPhone)),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人姓名 "),a.default.createElement("td",null," ",n.state.order.orderBy.username)),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人電話 "),a.default.createElement("td",null," ",a.default.createElement("a",{href:"tel:"+n.state.order.orderBy.telephone_no},n.state.order.orderBy.telephone_no," ",a.default.createElement("i",{className:"icon-phone2",style:{marginLeft:"5px"}})," "))),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人身份 "),a.default.createElement("td",null," ","driver"==n.state.order.orderBy.type?"司機":"乘客"))),n.state.order.acceptBy&&a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",null," 司機名稱 "),a.default.createElement("td",null," ",n.state.order.acceptBy.username)),a.default.createElement("tr",null,a.default.createElement("td",null," 司機電話 "),a.default.createElement("td",null," ",n.state.order.acceptBy.telephone_no)),a.default.createElement("tr",null,a.default.createElement("td",null," 司機車牌號碼 "),a.default.createElement("td",null," ",n.state.order.acceptBy.vehicle_reg_no)),a.default.createElement("tr",null,a.default.createElement("td",null," 接單時間 "),a.default.createElement("td",null," ",(0,h.default)(n.state.order.updatedAt).fromNow()))))),a.default.createElement("div",{className:"flex",style:{marginTop:"16px"}},!n.state.confirmed&&n.state.order.orderBy._id!=n.props.user._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("button",{className:"btn btn-success width100",onClick:(o=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.order.confirmOrder(n.state.order._id);case 2:return e.next=4,n.setState({confirmed:!0});case 4:n.alert("成功確認","你已成功確認這張柯打, 請盡快到達客戶所在地",function(){n.handleChange("show","alert")(!1)});case 5:case"end":return e.stop()}},e,r)})),function(e){return o.apply(this,arguments)})},"確認"),a.default.createElement("button",{className:"btn btn-error width100",style:{margin:"0 5px"},onClick:(t=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.order.releaseOrder(n.state.order._id);case 2:n.alert("取消確認","你已取消這張柯打",function(e){n.handleChange("show","alert")(!1),n.props.history.replace("/main")});case 3:case"end":return e.stop()}},e,r)})),function(e){return t.apply(this,arguments)})},"取消")),a.default.createElement("button",{className:"btn btn-warning width100",onClick:function(e){return n.props.history.replace("/main")}},"返回"))));var t,o},n.renderLandscape=function(e){return a.default.createElement("div",{className:"flex"},a.default.createElement("div",{style:{flex:1}},a.default.createElement(i.default,{width:"100%",height:"100%",origin:n.state.order.start,destination:n.state.order.end,route:n.state.order.route})),a.default.createElement("div",{className:"order_panel",style:{flex:1,height:"94%"}},a.default.createElement("h4",{style:{padding:"0 5px"}}," 訂單資料 "),a.default.createElement("div",{style:{height:"calc( 100% - 86px )",overflowY:"scroll"}},a.default.createElement("table",{className:"table table-cs"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",null," 起點 "),a.default.createElement("td",null,null!=n.state.myLoc&&a.default.createElement("a",{href:w(n.state.myLoc,n.state.order.start)}," ",n.state.order.start.address),null==n.state.myLoc&&a.default.createElement("span",null," ",n.state.order.start.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),n.state.order.route&&a.default.createElement("tr",null,a.default.createElement("td",null," 中途站 "),a.default.createElement("td",null,a.default.createElement("a",{href:w(n.state.order.start,n.state.order.route)}," ",n.state.order.route.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 終點 "),a.default.createElement("td",null,a.default.createElement("a",{href:w(n.state.order.start,n.state.order.end)}," ",n.state.order.end.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 折扣 "),a.default.createElement("td",null," ",100==n.state.order.criteria.discount?"原價":90==n.state.order.criteria.discount?"九折":"公司價")),n.state.order.criteria.return&&a.default.createElement("tr",null,a.default.createElement("td",null," 來回 "),a.default.createElement("td",null," 是")),n.state.order.criteria.fixedPrice&&a.default.createElement("tr",null,a.default.createElement("td",null," 定食 "),a.default.createElement("td",null," $ ",n.state.order.criteria.fixedPrice)),n.state.order.orderBy._id!=n.props.user._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("tr",null,a.default.createElement("td",null," 發單人姓名 "),a.default.createElement("td",null," ",n.state.order.orderBy.username)),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人電話 "),a.default.createElement("td",null," ",a.default.createElement("a",{href:"tel:"+n.state.order.orderBy.telephone_no},n.state.order.orderBy.telephone_no," ",a.default.createElement("i",{className:"icon-phone2",style:{marginLeft:"5px"}})," "))),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人身份 "),a.default.createElement("td",null," ","driver"==n.state.order.orderBy.type?"司機":"乘客"))),n.state.order.acceptBy&&n.state.order.acceptBy._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("tr",null,a.default.createElement("td",null," 接單人姓名 "),a.default.createElement("td",null," ",n.state.order.acceptBy.username)),a.default.createElement("tr",null,a.default.createElement("td",null," 接單人電話 "),a.default.createElement("td",null," ",a.default.createElement("a",{href:"tel:"+n.state.order.acceptBy.telephone_no},n.state.order.acceptBy.telephone_no," ",a.default.createElement("i",{className:"icon-phone2",style:{marginLeft:"5px"}})," "))),a.default.createElement("tr",null,a.default.createElement("td",null," 接單人身份 "),a.default.createElement("td",null," ","driver"==n.state.order.acceptBy.type?"司機":"乘客")))))),a.default.createElement("div",{className:"flex",style:{marginTop:"16px"}},!n.state.confirmed&&n.state.order.orderBy._id!=n.props.user._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("button",{className:"btn btn-success width100",onClick:(o=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.order.confirmOrder(n.state.order._id);case 2:return e.next=4,n.setState({confirmed:!0});case 4:n.alert("成功確認","你已成功確認這張柯打, 請盡快到達客戶所在地",function(){n.handleChange("show","alert")(!1)});case 5:case"end":return e.stop()}},e,r)})),function(e){return o.apply(this,arguments)})},"確認"),a.default.createElement("button",{className:"btn btn-error width100",style:{margin:"0 5px"},onClick:(t=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.order.releaseOrder(n.state.order._id);case 2:n.alert("取消確認","你已取消這張柯打",function(e){n.handleChange("show","alert")(!1),n.props.history.replace("/main")});case 3:case"end":return e.stop()}},e,r)})),function(e){return t.apply(this,arguments)})},"取消")),a.default.createElement("button",{className:"btn btn-warning width100",onClick:function(e){return n.props.history.replace("/main")}},"返回"))));var t,o},n.oncancel=function(){n.props.history.replace("/main")},n.state={order:null,myLoc:null,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log("Hello")}},modal:null,confirmed:!1,cancel:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),n(t,[{key:"componentWillMount",value:function(){var e=v(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.props.user){e.next=2;break}return e.abrupt("return",this.props.history.replace("/"));case 2:return t=this.props.cookies,this.cookie=new p.default(t.getAll()),e.next=6,this.getMe();case 6:m.default.listen(function(){var e=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),e.t0=t,e.next="USER_CANCEL"===e.t0?4:9;break;case 4:return e.next=6,window.alert("乘客已取消訂單");case 6:return e.next=8,r.props.history.replace("/main");case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=v(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,s.default.order.getAnOrder(this.props.match.params.orderId);case 3:r=e.sent,this.setState({order:r,confirmed:"accepted"!=r.status}),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){console.log(e);var r=e.coords,n=r.latitude,a=r.longitude;t.setState({myLoc:{lat:n,lng:a}})}):console.log("no navigator");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null==this.state.order?a.default.createElement(a.default.Fragment,null):a.default.createElement("div",{style:{backgroundColor:"#efefef",height:"100%",width:"100%"}},"text"==this.state.alert.type&&a.default.createElement(c.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,onConfirm:function(t){return e.state.alert.onConfirm()}}),this.state.cancel&&a.default.createElement("div",{className:"cancel-menu"},a.default.createElement("div",{className:"canel-menu-background"}),a.default.createElement("div",{className:"canel-menu-wrapper"},a.default.createElement("div",{className:"cancel-menu-title"},"取消訂單"),a.default.createElement("div",{className:"cancel-menu-content"},"乘客已取消訂單,現在將跳回主頁"),a.default.createElement("div",{className:"cancel-menu-button-row"},a.default.createElement("div",{className:"cancel-menu-button",onClick:function(){return e.oncancel()}},"確定")))),a.default.createElement(u.default,{lockOrientation:"landscape"},a.default.createElement(l.Orientation,{orientation:"landscape",alwaysRender:!1},a.default.createElement(this.renderLandscape,null)),a.default.createElement(l.Orientation,{orientation:"portrait",alwaysRender:!1},a.default.createElement(this.renderPortrait,null))))}}]),t}();t.default=(0,g.connect)(function(e,t){return{user:e.base.user,accessToken:e.base.accessToken}},function(e,t){return{}})((0,d.withRouter)((0,f.withCookies)(b)))},"./source/pages/order/style.css":function(e,t,r){},"./source/pages/register/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r("./source/utils/mvp.js")),a=l(r("./source/pages/register/register.model.jsx")),o=l(r("./source/pages/register/register.js")),i=l(r("./source/pages/register/register.view.jsx"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(a.default,o.default,i.default)},"./source/pages/register/register.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(r("./node_modules/react/index.js"));var n=a(r("./source/utils/mvp.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Presenter),t}();t.default=o},"./source/pages/register/register.model.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o(r("./source/api/index.js"));var n=r("./node_modules/react-redux/es/index.js"),a=o(r("./source/utils/mvp.js"));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),t}();t.default=(0,n.connect)(function(e,t){return{}},function(e,t){return{}})(i)},"./source/pages/register/register.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r("./node_modules/react/index.js")),o=u(r("./source/utils/mvp.js")),i=(u(r("./node_modules/styled-components/dist/styled-components.browser.esm.js")),u(r("./source/pages/login/bg.png")),u(r("./source/components/modal/modal.jsx")),u(r("./node_modules/sweetalert-react/lib/index.js"))),l=u(r("./source/api/index.js"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}var c=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.uploadImage=(n=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,l.default.user.upload(t);case 3:n=e.sent,a.setState({file:n}),a.setState({loading:!1});case 6:case"end":return e.stop()}},e,r)})),function(e){return n.apply(this,arguments)}),a.handleChange=function(e,t){return function(r){var n=JSON.parse(JSON.stringify(a.state));t?n[t][e]=r:n[e]=r,a.setState(n)}},a.onSubmit=s(regeneratorRuntime.mark(function e(){var t,n,o,i,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.refs.name.value,n=a.refs.phone.value,o=a.refs.password.value,i=a.refs.password_repeat.value,u=a.refs.vehicle_reg_no.value,s=a.refs.taxi_driver_id_no.value,""!=t.trim()&&""!=n.trim()&&""!=o.trim()&&""!=i.trim()&&""!=u.trim()&&""!=s.trim()&&null!=a.state.file){e.next=8;break}return e.abrupt("return",a.alert("認證錯誤","請填寫所有資料"));case 8:if(o==i){e.next=10;break}return e.abrupt("return",a.alert("認證錯誤","密碼和輸入密碼不一樣"));case 10:return e.prev=10,e.next=13,l.default.user.register(t,o,n,u,s,a.state.file);case 13:if(!(c=e.sent).error){e.next=20;break}if("UserExists"!=c.error.code){e.next=19;break}return e.abrupt("return",a.alert("註冊失敗","這個電話已被註冊！如遺失密碼，請用忘記密碼功能！"));case 19:return e.abrupt("return",a.alert("註冊失敗","資料有誤. 請檢查你的輸入! "));case 20:a.alert("註冊成功","成功註冊! 管理員會盡快審核你的申請! ",function(e){a.handleChange("show","alert")(!1),a.props.history.replace("/")}),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(10),console.log(e.t0),a.alert("註冊失敗","資料有誤. 請檢查你的輸入! ");case 27:case"end":return e.stop()}},e,r,[[10,23]])})),a.alertClose=function(){var e=JSON.parse(JSON.stringify(a.state));e.alert.show=!1,a.setState(e)},a.alert=function(e,t,r){var n=JSON.parse(JSON.stringify(a.state));n.alert.title=e,n.alert.text=t,n.alert.show=!0,n.alert.type="text",n.alert.onConfirm=r,a.setState(n)},a.prompt=function(e,t,r,n){var o=JSON.parse(JSON.stringify(a.state));o.alert.title=e,o.alert.text=t,o.alert.show=!0,o.alert.type="input",o.alert.placeholder=r,o.alert.onConfirm=n,a.setState(o)},a.state={file:null,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log(e)}},loading:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),n(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{className:"login-container",style:{backgroundImage:"url('https://s3-ap-southeast-1.amazonaws.com/image-bucket-ken.yip/194YYeTmdQ%E6%8B%B7%E8%B2%9D.jpg')"}},"text"==this.state.alert.type&&a.default.createElement(i.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,onConfirm:function(t){e.state.alert.onConfirm?e.state.alert.onConfirm():e.handleChange("show","alert")(!1)}}),"input"==this.state.alert.type&&a.default.createElement(i.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,type:"input",showCancelButton:!0,onCancel:this.alertClose,inputPlaceholder:this.state.alert.placeholder,onConfirm:this.state.alert.onConfirm}),a.default.createElement("input",{type:"file",accept:"image/*;capture=camera",id:"picture",style:{display:"none"},onChange:function(t){return e.uploadImage(t.target.files[0])}}),a.default.createElement("div",{className:"login-container__dark"}),a.default.createElement("div",{className:"login-content"},a.default.createElement("div",{className:"brand"},a.default.createElement("h2",null," 的士電召 司機版 ")),a.default.createElement("p",null,"註冊成為用戶 ",a.default.createElement("span",{className:"green pointer",style:{color:"lightgreen"},onClick:function(t){return e.props.history.goBack()}},"已註冊為用戶?")),a.default.createElement("form",{className:"login-content__form",onSubmit:function(e){return e.preventDefault()}},a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"用戶電話",type:"number",max:"8",ref:"phone"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"用戶名字",ref:"name"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"司機號碼",ref:"taxi_driver_id_no"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"車牌號碼",ref:"vehicle_reg_no"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{type:"password",className:"form-control",placeholder:"密碼",ref:"password"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{type:"password",className:"form-control",placeholder:"重覆密碼",ref:"password_repeat"})),this.state.loading&&a.default.createElement("div",{className:"form-group"},a.default.createElement("button",{type:"submit",className:"btn btn-default width100"},a.default.createElement("i",{className:"fa fa-photo",style:{marginRight:"5px"},disabled:!0})," 正在上傳照片 ...")),this.state.file&&!this.state.loading&&a.default.createElement("div",{className:"form-group"},a.default.createElement("button",{type:"submit",className:"btn btn-success width100",onClick:function(e){document.getElementById("picture").click()}},a.default.createElement("i",{className:"fa fa-photo",style:{marginRight:"5px"}})," 已上傳司機證照片")),!this.state.file&&!this.state.loading&&a.default.createElement("div",{className:"form-group"},a.default.createElement("button",{type:"submit",className:"btn btn-default width100",onClick:function(e){document.getElementById("picture").click()}},a.default.createElement("i",{className:"fa fa-photo",style:{marginRight:"5px"}})," 上傳司機證照片")),a.default.createElement("button",{type:"submit",className:"btn btn-warning width100",onClick:function(t){t.preventDefault(),e.onSubmit()}},"註冊成為新用戶")),a.default.createElement("footer",{style:{paddingBottom:"10px"}},"@ 2018. 的士電召. All RIGHT RESERVED.")))}}]),t}();t.default=c},"./source/router.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r("./node_modules/react/index.js")),o=r("./node_modules/react-router-dom/es/index.js"),i=u(r("./source/App.jsx")),l=u(r("./source/pages/index.js"));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),n(t,[{key:"render",value:function(){return a.default.createElement(i.default,null,a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{exact:!0,path:"/",component:l.default.login}),a.default.createElement(o.Route,{exact:!0,path:"/forget",component:l.default.forget}),a.default.createElement(o.Route,{exact:!0,path:"/changePw",component:l.default.changePw}),a.default.createElement(o.Route,{exact:!0,path:"/register",component:l.default.register}),a.default.createElement(o.Route,{exact:!0,path:"/main",component:l.default.main}),a.default.createElement(o.Route,{exact:!0,path:"/order/:orderId",component:l.default.order})))}}]),t}();t.default=s},"./source/socket.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r("./node_modules/socket.io-client/lib/index.js")),a=i(r("./source/store.js")),o=i(r("./source/api/url.js"));function i(e){return e&&e.__esModule?e:{default:e}}function l(){this.io=null,this.socketId=null,this.interval,this.callback=function(e){return console.log(e)}}l.prototype.connect=function(){var e,t,r=this,a=this;this.io=(0,n.default)(o.default),this.io.on("connect",(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.socketId=this.id,console.log(a.socketId),a.renewLocation(),a.interval=setInterval(function(){return a.renewLocation},1e4),a.whatIsMe();case 5:case"end":return e.stop()}},e,this)}),t=function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})},function(e){return t.apply(this,arguments)})),this.io.on("action",function(e){r.callback&&r.callback(e)}),this.io.on("disconnect",function(e){return clearInterval(a.interval)})},l.prototype.renewLocation=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var r=t.coords,n=r.latitude,a=r.longitude;e.io.emit("renew_location",{lat:n,lng:a})}):console.log("no location")},l.prototype.whatIsMe=function(e){var t=a.default.getState().base.accessToken;(e||t)&&this.io.emit("what_is_me",e||t)},l.prototype.listen=function(e){this.callback=e},l.prototype.mute=function(){this.callback=null},t.default=new l},"./source/store.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/redux/es/redux.js"),a=i(r("./source/modules/index.js")),o=i(r("./node_modules/redux-thunk/es/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.createStore)(a.default,(0,n.applyMiddleware)(o.default));t.default=l},"./source/utils/mvp.js":function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=r("./node_modules/react/index.js"),s=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.update=function(e){return r.setState(e)},r.presenter=e.presenter,r.presenter.setModel(r),r}return l(t,u.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props.children,r=u.Children.map(t,function(t){return u.cloneElement(t,n({},e.state,e.props))});return u.createElement(u.Fragment,null,r)}}]),t}(),c=function(){function e(){o(this,e)}return a(e,[{key:"setView",value:function(e){this.view=e}},{key:"setModel",value:function(e){this.model=e}}]),e}(),d=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleChange=function(e,t){return function(n){var a=JSON.parse(JSON.stringify(r.state));t?a[t][e]=n:a[e]=n,r.setState(a)}},r.tunnelSelect=function(e,t){return function(n){var a=JSON.parse(JSON.stringify(r.state));a[t][e]==n?a[t][e]="any":a[t][e]=n,console.log(a),r.setState(a)}},r.presenter=e.presenter,r.presenter.setView(r),r}return l(t,u.PureComponent),t}();e.exports=t=function(e,t,r){return function(a){var o=new t,i=u.createElement(r,n({},a,{presenter:o}));return u.createElement(e,{presenter:o},i)}},t.Model=s,t.View=d,t.Presenter=c},"./source/utils/react-orientation.js":function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.Orientation=void 0;var a,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r("./node_modules/react/index.js"),u=(a=l)&&a.__esModule?a:{default:a};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=t.Orientation=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,l.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.orientation,r=e.children,n=e.className;return u.default.createElement("div",{className:n+" react-orientation react-orientation--"+t},r)}}]),t}();f.defaultProps={className:"",alwaysRender:!0};var p=function(){return!1};window.screen.lockOrientationUniversal=window.screen.lockOrientation||window.screen.mozLockOrientation||window.screen.msLockOrientation;var m=function(e){function t(e){s(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.lockOrientation(e),r.onOrientationChange=r.onOrientationChange.bind(r),r.state={orienation:null,type:null,angle:null},r}return d(t,l.Component),i(t,[{key:"componentWillMount",value:function(){this.onOrientationChange(null)}},{key:"componentDidMount",value:function(){console.log("DeviceOrientation","componentDidMount"),window.screen.orientation&&"onchange"in window.screen.orientation?(console.log("Using screen.orientation.onchange"),window.screen.orientation.addEventListener("change",this.onOrientationChange)):"onorientationchange"in window?(console.log("Using window.onorientationchange"),window.addEventListener("orientationchange",this.onOrientationChange)):console.warn("No orientationchange events")}},{key:"componentWillUnmount",value:function(){console.log("DeviceOrientation","componentWillUnmount"),window.screen.orientation&&"onchange"in window.screen.orientation?(console.log("Removing screen.orientation.onchange"),window.screen.orientation.removeEventListener("change",this.onOrientationChange)):"onorientationchange"in window&&(console.log("Removing window.onorientationchange"),window.removeEventListener("orientationchange",this.onOrientationChange))}},{key:"onOrientationChange",value:function(e){var t=this.props.onOrientationChange||p,r="portrait",n="primary",a=0;if(window.orientation&&(a=window.orientation,r=90===Math.abs(a)?"landscape":"portrait"),window.screen.orientation){var i=window.screen.orientation.type.split("-"),l=o(i,2);r=l[0],n=l[1],a=window.screen.orientation}this.setState({orientation:r,type:n,angle:a}),t(r,n,a)}},{key:"lockOrientation",value:function(e){var t=e.lockOrientation;if("string"==typeof t){var r,n,a=this.props.onLockOrientation||p;return(r=t,n=window.screen,n.orientation&&"function"==typeof n.orientation.lock?window.screen.orientation.lock(r):n.lockOrientationUniversal?new Promise(function(e,t){n.lockOrientationUniversal(r)?e():t()}):new Promise(function(e,t){return t()})).then(function(){a(!0)}).catch(function(){a(!1)})}}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,n=this.state.orientation;return u.default.createElement("div",{className:""+r},l.Children.map(t,function(e){var t=e.props;if(t.alwaysRender||t.orientation===n)return e}))}}]),t}();t.default=m;m.defaultProps={className:""}},0:function(e,t,r){r("./node_modules/babel-polyfill/lib/index.js"),e.exports=r("./source/index.js")},1:function(e,t){}});